<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Matside — Scoreboard v3.1</title>

<!-- SOCKET.IO -->
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

<style>
/* --------------------------------------------------
   CORE UI KIT
-------------------------------------------------- */
:root {
  --bg: #060708;
  --panel: rgba(255,255,255,0.04);
  --border: rgba(255,255,255,0.08);

  --red: #ff3b3b;
  --green: #4dff4d;
  --text: #ffffff;

  --radius: 18px;
  --shadow: 0 0 22px rgba(0,0,0,0.55);

  --glow-red: 0 0 28px rgba(255, 50, 50, 0.65);
  --glow-green: 0 0 28px rgba(80, 255, 80, 0.65);
}

/* --------------------------------------------------
   PAGE BACKGROUND
-------------------------------------------------- */
body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  overflow: hidden;
}

.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 30px;
}

/* --------------------------------------------------
   TOP PANEL — NEW LAYOUT (Timer Center)
-------------------------------------------------- */
.top-panel {
  width: 90%;
  max-width: 900px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 25px;
}

.top-box {
  background: var(--panel);
  padding: 14px 22px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  font-size: 26px;
  font-weight: 700;
  text-align: center;
  min-width: 180px;
  box-shadow: var(--shadow);
}

#timeBox {
  font-size: 58px;      /* MUCH larger font */
  font-weight: 900;
  letter-spacing: 1px;
  padding: 22px 0;
}

/* --------------------------------------------------
   MAIN SCORE PANEL
-------------------------------------------------- */
.score-panel {
  width: 90%;
  max-width: 900px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 25px;
}

.names-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
}

.name {
  width: 48%;
  text-align: center;
  font-size: 38px;
  font-weight: 700;
  letter-spacing: 1px;
}

/* --------------------------------------------------
   SCORE BLOCKS
-------------------------------------------------- */
.score-row {
  display: flex;
  justify-content: space-between;
}

.score-box {
  width: 48%;
  border-radius: var(--radius);
  padding: 40px 0;
  text-align: center;
  font-size: 90px;
  font-weight: 900;
  box-shadow: var(--shadow);
}

.score-red {
  background: rgba(255, 50, 50, 0.22);
  border: 3px solid var(--red);
  color: var(--red);
  text-shadow: var(--glow-red);
}

.score-green {
  background: rgba(80, 255, 80, 0.22);
  border: 3px solid var(--green);
  color: var(--green);
  text-shadow: var(--glow-green);
}

/* --------------------------------------------------
   RESPONSIVE ADJUSTMENTS
-------------------------------------------------- */
@media (max-width: 700px) {
  .top-box { font-size: 20px; min-width: 110px; }
  #timeBox { font-size: 44px; }
  .name { font-size: 26px; }
  .score-box { font-size: 60px; padding: 26px 0; }
}
</style>
</head>

<body>
<div class="container">

  <!-- TOP ROW -->
  <div class="top-panel">

    <!-- LEFT — MAT -->
    <div class="top-box">
      MAT <span id="matNum">1</span>
    </div>

    <!-- CENTER — TIMER (NEW) -->
    <div class="top-box" id="timeBox">00:00</div>

    <!-- RIGHT — PERIOD (MOVED) -->
    <div class="top-box">
      PER <span id="periodNum">1</span>
    </div>

  </div>

  <!-- MAIN SCORE PANEL -->
  <div class="score-panel">

    <div class="names-row">
      <div class="name" id="redName">RED</div>
      <div class="name" id="greenName">GREEN</div>
    </div>

    <div class="score-row">
      <div class="score-box score-red" id="redScore">0</div>
      <div class="score-box score-green" id="greenScore">0</div>
    </div>

  </div>
</div>

<script>
/* --------------------------------------------------
   SOCKET.IO LOGIC
-------------------------------------------------- */
const socket = io("https://scoreboard-server-er33.onrender.com");

function formatTime(sec) {
  const m = Math.floor(sec / 60).toString().padStart(2, "0");
  const s = (sec % 60).toString().padStart(2, "0");
  return `${m}:${s}`;
}

socket.on("stateUpdate", (state) => {
  const mat = parseInt(new URLSearchParams(location.search).get("mat")) || 1;
  const m = state.mats[mat];
  if (!m) return;

  document.getElementById("matNum").textContent = mat;
  document.getElementById("periodNum").textContent = m.period;
  document.getElementById("timeBox").textContent = formatTime(m.time);
  document.getElementById("redScore").textContent = m.red;
  document.getElementById("greenScore").textContent = m.green;

  if (m.redName) document.getElementById("redName").textContent = m.redName;
  if (m.greenName) document.getElementById("greenName").textContent = m.greenName;
});
</script>

</body>
</html>
